<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClausLab - Explorador de Clausius-Clapeyron</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #667eea;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            color: #764ba2;
            margin: 30px 0 20px;
            font-size: 1.8em;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-center {
            display: block;
            margin: 30px auto;
        }

        .phase-animation {
            width: 100%;
            height: 300px;
            position: relative;
            background: linear-gradient(to bottom, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .molecule {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #2196F3;
            border-radius: 50%;
            animation: float 3s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(10px); }
        }

        .variable-card {
            display: inline-block;
            background: #f5f5f5;
            padding: 15px 25px;
            margin: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .variable-card:hover {
            background: #667eea;
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .tooltip {
            display: none;
            position: absolute;
            background: #333;
            color: white;
            padding: 10px;
            border-radius: 5px;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            font-size: 0.9em;
            z-index: 1000;
        }

        .variable-card:hover .tooltip {
            display: block;
        }

        .slider-container {
            margin: 30px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            background: #764ba2;
            transform: scale(1.2);
        }

        .result-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .equation {
            font-size: 1.3em;
            text-align: center;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .substance-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .substance-card {
            background: white;
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .substance-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .substance-card.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
        }

        .exercise-card {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .feedback.correct {
            background: #4caf50;
            color: white;
        }

        .feedback.incorrect {
            background: #f44336;
            color: white;
        }

        .score-display {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #ddd;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .comparison-panel {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-label:hover {
            background: #e0e0e0;
        }

        .checkbox-label input {
            margin-right: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .section {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .btn {
                padding: 12px 30px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Secci√≥n 1: Inicio -->
        <div id="section1" class="section active">
            <h1>üß™ ClausLab</h1>
            <h2>Explorador de la Ecuaci√≥n de Clausius-Clapeyron</h2>
            
            <div class="phase-animation" id="introAnimation">
                <!-- Las mol√©culas se generar√°n din√°micamente -->
            </div>
            
            <p style="font-size: 1.2em; line-height: 1.8; text-align: center; margin: 30px 0;">
                La ecuaci√≥n de Clausius-Clapeyron describe la relaci√≥n entre la <strong>presi√≥n de vapor</strong> 
                y la <strong>temperatura</strong> durante los cambios de fase de una sustancia. 
                Es fundamental en termodin√°mica para entender fen√≥menos como la ebullici√≥n, 
                evaporaci√≥n y condensaci√≥n.
            </p>
            
            <div class="equation">
                ln(P‚ÇÇ/P‚ÇÅ) = -(ŒîH<sub>vap</sub>/R) √ó (1/T‚ÇÇ - 1/T‚ÇÅ)
            </div>
            
            <button class="btn btn-center" onclick="goToSection(2)">üöÄ Explorar el fen√≥meno</button>
        </div>

        <!-- Secci√≥n 2: Aprendizaje Interactivo -->
        <div id="section2" class="section">
            <h1>üìö M√≥dulo de Aprendizaje</h1>
            <h2>Conoce las variables de la ecuaci√≥n</h2>
            
            <p style="margin: 20px 0; font-size: 1.1em;">
                Pasa el cursor sobre cada variable para conocer su significado:
            </p>
            
            <div style="text-align: center; margin: 40px 0;">
                <div class="variable-card">
                    <strong>P‚ÇÅ, P‚ÇÇ</strong>
                    <div class="tooltip">
                        <strong>Presi√≥n de vapor</strong><br>
                        P‚ÇÅ: Presi√≥n inicial (atm)<br>
                        P‚ÇÇ: Presi√≥n final (atm)<br>
                        Representa la presi√≥n ejercida por el vapor en equilibrio con el l√≠quido.
                    </div>
                </div>
                
                <div class="variable-card">
                    <strong>T‚ÇÅ, T‚ÇÇ</strong>
                    <div class="tooltip">
                        <strong>Temperatura</strong><br>
                        T‚ÇÅ: Temperatura inicial (K)<br>
                        T‚ÇÇ: Temperatura final (K)<br>
                        Siempre debe expresarse en Kelvin (K = ¬∞C + 273.15)
                    </div>
                </div>
                
                <div class="variable-card">
                    <strong>ŒîH<sub>vap</sub></strong>
                    <div class="tooltip">
                        <strong>Entalp√≠a de vaporizaci√≥n</strong><br>
                        Unidades: J/mol o kJ/mol<br>
                        Energ√≠a necesaria para convertir 1 mol de l√≠quido en vapor a temperatura constante.
                    </div>
                </div>
                
                <div class="variable-card">
                    <strong>R</strong>
                    <div class="tooltip">
                        <strong>Constante de los gases</strong><br>
                        R = 8.314 J/(mol¬∑K)<br>
                        Constante universal que relaciona energ√≠a, temperatura y cantidad de sustancia.
                    </div>
                </div>
            </div>
            
            <div class="result-box">
                <h3>üí° Concepto clave</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    Cuando aumentamos la temperatura de un l√≠quido, las mol√©culas adquieren m√°s energ√≠a cin√©tica. 
                    Esto permite que m√°s mol√©culas escapen de la superficie del l√≠quido, 
                    aumentando as√≠ la <strong>presi√≥n de vapor</strong>.
                </p>
            </div>
            
            <div class="nav-buttons">
                <button class="btn" onclick="goToSection(1)">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="goToSection(3)">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 3: Simulador -->
        <div id="section3" class="section">
            <h1>üî¨ Simulador de Experimentos</h1>
            
            <h2>Selecciona una sustancia:</h2>
            <div class="substance-selector" id="substanceSelector">
                <div class="substance-card selected" onclick="selectSubstance('water', this)">
                    <h3>üíß Agua</h3>
                    <p>ŒîH<sub>vap</sub> = 40.66 kJ/mol</p>
                </div>
                <div class="substance-card" onclick="selectSubstance('ethanol', this)">
                    <h3>üç∫ Etanol</h3>
                    <p>ŒîH<sub>vap</sub> = 38.56 kJ/mol</p>
                </div>
                <div class="substance-card" onclick="selectSubstance('ammonia', this)">
                    <h3>‚öóÔ∏è Amon√≠aco</h3>
                    <p>ŒîH<sub>vap</sub> = 23.33 kJ/mol</p>
                </div>
                <div class="substance-card" onclick="selectSubstance('acetone', this)">
                    <h3>üß¥ Acetona</h3>
                    <p>ŒîH<sub>vap</sub> = 29.10 kJ/mol</p>
                </div>
            </div>
            
            <div class="slider-container">
                <h3>Temperatura: <span id="tempValue">25</span> ¬∞C (<span id="tempK">298.15</span> K)</h3>
                <input type="range" min="0" max="100" value="25" class="slider" id="tempSlider">
            </div>
            
            <div class="result-box" id="simulatorResults">
                <h3>üìä Resultados</h3>
                <p><strong>Presi√≥n de vapor:</strong> <span id="pressureValue">0.0317</span> atm</p>
                <p><strong>Presi√≥n en mmHg:</strong> <span id="pressuremmHg">24.1</span> mmHg</p>
            </div>
            
            <div class="chart-container">
                <canvas id="simulatorChart"></canvas>
            </div>
            
            <div class="equation" id="equationDisplay">
                ln(P/1) = -(40660/8.314) √ó (1/298.15 - 1/373.15)
            </div>
            
            <div class="nav-buttons">
                <button class="btn" onclick="goToSection(2)">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="goToSection(4)">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 4: Comparaci√≥n -->
        <div id="section4" class="section">
            <h1>üìà Comparaci√≥n de Sustancias</h1>
            
            <h2>Selecciona las sustancias que deseas comparar:</h2>
            <div class="comparison-panel">
                <label class="checkbox-label">
                    <input type="checkbox" checked onchange="updateComparison()" data-substance="water">
                    üíß Agua
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" checked onchange="updateComparison()" data-substance="ethanol">
                    üç∫ Etanol
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" checked onchange="updateComparison()" data-substance="ammonia">
                    ‚öóÔ∏è Amon√≠aco
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" checked onchange="updateComparison()" data-substance="acetone">
                    üß¥ Acetona
                </label>
            </div>
            
            <div class="chart-container">
                <canvas id="comparisonChart"></canvas>
            </div>
            
            <div class="result-box">
                <h3>üîç An√°lisis</h3>
                <p style="font-size: 1.1em; line-height: 1.8;">
                    Observa c√≥mo sustancias con <strong>mayor entalp√≠a de vaporizaci√≥n</strong> (como el agua) 
                    requieren m√°s energ√≠a para evaporarse, resultando en curvas m√°s pronunciadas. 
                    El amon√≠aco, con menor ŒîH<sub>vap</sub>, se evapora m√°s f√°cilmente.
                </p>
            </div>
            
            <div class="nav-buttons">
                <button class="btn" onclick="goToSection(3)">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="goToSection(5)">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 5: Ejercicios -->
        <div id="section5" class="section">
            <h1>‚úèÔ∏è Zona de Pr√°ctica</h1>
            
            <div class="exercise-card">
                <h2>Ejercicio 1</h2>
                <p style="font-size: 1.1em; margin: 15px 0;">
                    La presi√≥n de vapor del agua a 100¬∞C es 1 atm. 
                    Calcula la presi√≥n de vapor a 60¬∞C.
                    (ŒîH<sub>vap</sub> del agua = 40660 J/mol)
                </p>
                
                <div class="input-group">
                    <label>Tu respuesta (en atm):</label>
                    <input type="number" id="exercise1Answer" step="0.001" placeholder="Ej: 0.196">
                </div>
                
                <button class="btn" onclick="checkExercise1()">Verificar respuesta</button>
                
                <div id="exercise1Feedback"></div>
                
                <div id="exercise1Steps" style="display: none; margin-top: 20px; padding: 20px; background: #f0f8ff; border-radius: 10px;">
                    <h3>üìù Soluci√≥n paso a paso:</h3>
                    <p><strong>Paso 1:</strong> Convertir temperaturas a Kelvin</p>
                    <p>T‚ÇÅ = 100¬∞C + 273.15 = 373.15 K</p>
                    <p>T‚ÇÇ = 60¬∞C + 273.15 = 333.15 K</p>
                    
                    <p style="margin-top: 15px;"><strong>Paso 2:</strong> Aplicar la ecuaci√≥n</p>
                    <p>ln(P‚ÇÇ/1) = -(40660/8.314) √ó (1/333.15 - 1/373.15)</p>
                    
                    <p style="margin-top: 15px;"><strong>Paso 3:</strong> Resolver</p>
                    <p>ln(P‚ÇÇ) = -(4889.8) √ó (0.003002 - 0.002680)</p>
                    <p>ln(P‚ÇÇ) = -(4889.8) √ó (0.000322)</p>
                    <p>ln(P‚ÇÇ) = -1.574</p>
                    <p>P‚ÇÇ = e<sup>-1.574</sup> ‚âà 0.207 atm</p>
                </div>
            </div>
            
            <div class="exercise-card">
                <h2>Ejercicio 2</h2>
                <p style="font-size: 1.1em; margin: 15px 0;">
                    ¬øA qu√© temperatura el etanol tendr√° una presi√≥n de vapor de 0.5 atm?
                    (ŒîH<sub>vap</sub> = 38560 J/mol, P a 78.4¬∞C = 1 atm)
                </p>
                
                <div class="input-group">
                    <label>Tu respuesta (en ¬∞C):</label>
                    <input type="number" id="exercise2Answer" step="0.1" placeholder="Ej: 63.5">
                </div>
                
                <button class="btn" onclick="checkExercise2()">Verificar respuesta</button>
                
                <div id="exercise2Feedback"></div>
                
                <div id="exercise2Steps" style="display: none; margin-top: 20px; padding: 20px; background: #f0f8ff; border-radius: 10px;">
                    <h3>üìù Soluci√≥n paso a paso:</h3>
                    <p><strong>Paso 1:</strong> Datos conocidos</p>
                    <p>T‚ÇÅ = 78.4¬∞C = 351.55 K, P‚ÇÅ = 1 atm</p>
                    <p>P‚ÇÇ = 0.5 atm, T‚ÇÇ = ?</p>
                    
                    <p style="margin-top: 15px;"><strong>Paso 2:</strong> Reorganizar la ecuaci√≥n</p>
                    <p>1/T‚ÇÇ = 1/T‚ÇÅ - (R/ŒîH<sub>vap</sub>) √ó ln(P‚ÇÇ/P‚ÇÅ)</p>
                    
                    <p style="margin-top: 15px;"><strong>Paso 3:</strong> Sustituir valores</p>
                    <p>1/T‚ÇÇ = 1/351.55 - (8.314/38560) √ó ln(0.5/1)</p>
                    <p>1/T‚ÇÇ = 0.002845 - (0.0002156) √ó (-0.693)</p>
                    <p>1/T‚ÇÇ = 0.002845 + 0.0001494</p>
                    <p>1/T‚ÇÇ = 0.002994</p>
                    <p>T‚ÇÇ = 334.0 K ‚âà 60.9¬∞C</p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn" onclick="goToSection(4)">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="goToSection(6)">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 6: Visualizaci√≥n Avanzada -->
        <div id="section6" class="section">
            <h1>üå°Ô∏è Visualizaci√≥n Conceptual Avanzada</h1>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0;">
                <div>
                    <h3 style="text-align: center;">Comportamiento Molecular</h3>
                    <div class="phase-animation" id="molecularAnimation" style="height: 400px;">
                        <!-- Animaci√≥n de mol√©culas -->
                    </div>
                    <div style="text-align: center; margin-top: 10px;">
                        <p><strong>Temperatura:</strong> <span id="molTemp">25</span>¬∞C</p>
                    </div>
                </div>
                
                <div>
                    <h3 style="text-align: center;">Presi√≥n vs Temperatura</h3>
                    <div class="chart-container" style="height: 400px;">
                        <canvas id="advancedChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="slider-container">
                <h3>Controla la temperatura del sistema</h3>
                <input type="range" min="0" max="100" value="25" class="slider" id="advancedSlider">
            </div>
            
            <div class="result-box">
                <h3>üî¨ Observaciones</h3>
                <p id="advancedObservation" style="font-size: 1.1em; line-height: 1.8;">
                    A 25¬∞C, las mol√©culas tienen energ√≠a cin√©tica moderada. 
                    Pocas mol√©culas tienen suficiente energ√≠a para escapar de la superficie del l√≠quido.
                </p>
            </div>
            
            <div class="nav-buttons">
                <button class="btn" onclick="goToSection(5)">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="goToSection(7)">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 7: Desaf√≠o Final -->
        <div id="section7" class="section">
            <h1>üèÜ Desaf√≠o Final</h1>
            
            <div class="score-display">
                Puntuaci√≥n: <span id="finalScore">0</span> / 100
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%;">0%</div>
            </div>
            
            <div class="exercise-card" id="challengeCard">
                <h2>Pregunta <span id="questionNumber">1</span> de 5</h2>
                <p id="challengeQuestion" style="font-size: 1.2em; margin: 20px 0;"></p>
                
                <div class="input-group">
                    <label>Tu respuesta:</label>
                    <input type="number" id="challengeAnswer" step="0.01">
                </div>
                
                <p style="margin-top: 10px; color: #666;">
                    ‚è±Ô∏è Tiempo restante: <span id="timer">60</span> segundos
                </p>
                
                <button class="btn" onclick="submitChallenge()">Enviar respuesta</button>
                
                <div id="challengeFeedback"></div>
            </div>
            
            <div id="finalResults" style="display: none; text-align: center;">
                <h2>¬°Desaf√≠o completado! üéâ</h2>
                <div class="score-display" style="font-size: 3em;">
                    <span id="finalScoreDisplay">0</span> puntos
                </div>
                
                <div id="badge" style="font-size: 5em; margin: 30px 0;"></div>
                <h3 id="badgeTitle" style="color: #667eea; font-size: 1.8em;"></h3>
                
                <p id="finalMessage" style="font-size: 1.2em; margin: 20px 0;"></p>
                
                <button class="btn" onclick="resetChallenge()">üîÑ Intentar de nuevo</button>
            </div>
            
            <div class="nav-buttons">
                <button class="btn" onclick="goToSection(6)">‚¨ÖÔ∏è Anterior</button>
                <button class="btn" onclick="goToSection(8)">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Secci√≥n 8: Conclusi√≥n -->
        <div id="section8" class="section">
            <h1>üéì Conclusi√≥n y Recursos</h1>
            
            <h2>Resumen de lo Aprendido</h2>
            <div class="result-box">
                <h3>‚úÖ Has dominado:</h3>
                <ul style="font-size: 1.1em; line-height: 2; margin-left: 20px;">
                    <li>La ecuaci√≥n de Clausius-Clapeyron y sus variables</li>
                    <li>C√≥mo la temperatura afecta la presi√≥n de vapor</li>
                    <li>Diferencias entre sustancias seg√∫n su entalp√≠a de vaporizaci√≥n</li>
                    <li>Resoluci√≥n de problemas pr√°cticos de termodin√°mica</li>
                    <li>Interpretaci√≥n molecular de los cambios de fase</li>
                </ul>
            </div>
            
            <h2>Aplicaciones Pr√°cticas</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                <div class="result-box">
                    <h3>üè≠ Ingenier√≠a Qu√≠mica</h3>
                    <p>Dise√±o de evaporadores, torres de destilaci√≥n y equipos de separaci√≥n</p>
                </div>
                
                <div class="result-box">
                    <h3>üå°Ô∏è Meteorolog√≠a</h3>
                    <p>Predicci√≥n de formaci√≥n de nubes, niebla y patrones de evaporaci√≥n</p>
                </div>
                
                <div class="result-box">
                    <h3>üç∑ Industria Alimentaria</h3>
                    <p>Procesos de destilaci√≥n de bebidas alcoh√≥licas y concentraci√≥n de alimentos</p>
                </div>
                
                <div class="result-box">
                    <h3>‚ùÑÔ∏è Refrigeraci√≥n</h3>
                    <p>Selecci√≥n de refrigerantes y dise√±o de sistemas de enfriamiento</p>
                </div>
                
                <div class="result-box">
                    <h3>üíä Farmac√©utica</h3>
                    <p>Liofilizaci√≥n de medicamentos y control de calidad</p>
                </div>
                
                <div class="result-box">
                    <h3>üåç Ciencias Ambientales</h3>
                    <p>Estudio de ciclos hidrol√≥gicos y comportamiento de contaminantes vol√°tiles</p>
                </div>
            </div>
            
            <h2>Profundiza tu Conocimiento</h2>
            <div class="exercise-card">
                <h3>üìö Temas Relacionados</h3>
                <ul style="font-size: 1.1em; line-height: 2; margin-left: 20px;">
                    <li>Diagrama de fases de sustancias puras</li>
                    <li>Punto triple y punto cr√≠tico</li>
                    <li>Regla de Trouton y entrop√≠a de vaporizaci√≥n</li>
                    <li>Ecuaci√≥n de Antoine (forma emp√≠rica alternativa)</li>
                    <li>Presi√≥n de vapor de soluciones (Ley de Raoult)</li>
                    <li>Fen√≥menos de ebullici√≥n y cavitaci√≥n</li>
                </ul>
            </div>
            
            <div style="text-align: center; margin: 40px 0;">
                <h2>¬°Gracias por usar ClausLab! üéâ</h2>
                <p style="font-size: 1.2em; margin: 20px 0;">
                    Has completado tu viaje de aprendizaje sobre la ecuaci√≥n de Clausius-Clapeyron.
                </p>
                <button class="btn" onclick="goToSection(1)">üè† Volver al inicio</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentSubstance = 'water';
        let simulatorChart = null;
        let comparisonChart = null;
        let advancedChart = null;
        let challengeTimer = null;
        let currentQuestion = 0;
        let score = 0;
        let timeLeft = 60;
        
        // Datos de sustancias (ŒîHvap en J/mol)
        const substances = {
            water: { name: 'Agua', Hvap: 40660, color: '#2196F3' },
            ethanol: { name: 'Etanol', Hvap: 38560, color: '#FF9800' },
            ammonia: { name: 'Amon√≠aco', Hvap: 23330, color: '#4CAF50' },
            acetone: { name: 'Acetona', Hvap: 29100, color: '#E91E63' }
        };
        
        const R = 8.314; // J/(mol¬∑K)
        
        // Funciones de navegaci√≥n
        function goToSection(num) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('section' + num).classList.add('active');
            window.scrollTo(0, 0);
            
            // Inicializar secciones espec√≠ficas
            if (num === 3) initSimulator();
            if (num === 4) initComparison();
            if (num === 6) initAdvanced();
            if (num === 7) startChallenge();
        }
        
        // Animaci√≥n de mol√©culas en inicio
        function createMolecules(containerId, count) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const molecule = document.createElement('div');
                molecule.className = 'molecule';
                molecule.style.left = Math.random() * 90 + '%';
                molecule.style.top = Math.random() * 80 + 20 + '%';
                molecule.style.animationDelay = Math.random() * 3 + 's';
                molecule.style.animationDuration = (2 + Math.random() * 2) + 's';
                container.appendChild(molecule);
            }
        }
        
        createMolecules('introAnimation', 30);
        
        // Funci√≥n para calcular presi√≥n de vapor
        function calculatePressure(substance, tempC) {
            const Hvap = substances[substance].Hvap;
            const T = tempC + 273.15; // Convertir a Kelvin
            const T_ref = 373.15; // 100¬∞C en Kelvin (punto de ebullici√≥n del agua como referencia)
            const P_ref = 1; // 1 atm a 100¬∞C
            
            // ln(P2/P1) = -(Hvap/R) * (1/T2 - 1/T1)
            const lnRatio = -(Hvap / R) * (1/T - 1/T_ref);
            const P = P_ref * Math.exp(lnRatio);
            
            return P;
        }
        
        // Selecci√≥n de sustancia
        function selectSubstance(substance, element) {
            currentSubstance = substance;
            document.querySelectorAll('.substance-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            updateSimulator();
        }
        
        // Inicializar simulador
        function initSimulator() {
            const slider = document.getElementById('tempSlider');
            slider.addEventListener('input', updateSimulator);
            updateSimulator();
            
            // Crear gr√°fica
            const ctx = document.getElementById('simulatorChart').getContext('2d');
            simulatorChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Presi√≥n de vapor',
                        data: [],
                        borderColor: substances[currentSubstance].color,
                        backgroundColor: substances[currentSubstance].color + '33',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Temperatura (¬∞C)' } },
                        y: { title: { display: true, text: 'Presi√≥n (atm)' } }
                    }
                }
            });
        }
        
        function updateSimulator() {
            const tempC = parseFloat(document.getElementById('tempSlider').value);
            const tempK = tempC + 273.15;
            
            document.getElementById('tempValue').textContent = tempC.toFixed(1);
            document.getElementById('tempK').textContent = tempK.toFixed(2);
            
            const pressure = calculatePressure(currentSubstance, tempC);
            const pressuremmHg = pressure * 760;
            
            document.getElementById('pressureValue').textContent = pressure.toFixed(4);
            document.getElementById('pressuremmHg').textContent = pressuremmHg.toFixed(1);
            
            // Actualizar ecuaci√≥n
            const Hvap = substances[currentSubstance].Hvap;
            document.getElementById('equationDisplay').innerHTML = 
                `ln(P/1) = -(${Hvap}/8.314) √ó (1/${tempK.toFixed(2)} - 1/373.15)`;
            
            // Actualizar gr√°fica
            if (simulatorChart) {
                const temps = [];
                const pressures = [];
                for (let t = 0; t <= 100; t += 5) {
                    temps.push(t);
                    pressures.push(calculatePressure(currentSubstance, t));
                }
                
                simulatorChart.data.labels = temps;
                simulatorChart.data.datasets[0].data = pressures;
                simulatorChart.data.datasets[0].borderColor = substances[currentSubstance].color;
                simulatorChart.data.datasets[0].backgroundColor = substances[currentSubstance].color + '33';
                simulatorChart.data.datasets[0].label = substances[currentSubstance].name;
                simulatorChart.update();
            }
        }
        
        // Comparaci√≥n de sustancias
        function initComparison() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            
            const datasets = [];
            Object.keys(substances).forEach(key => {
                const temps = [];
                const pressures = [];
                for (let t = 0; t <= 100; t += 2) {
                    temps.push(t);
                    pressures.push(calculatePressure(key, t));
                }
                
                datasets.push({
                    label: substances[key].name,
                    data: pressures,
                    borderColor: substances[key].color,
                    backgroundColor: substances[key].color + '33',
                    tension: 0.4,
                    fill: false
                });
            });
            
            comparisonChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 51}, (_, i) => i * 2),
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Temperatura (¬∞C)' } },
                        y: { title: { display: true, text: 'Presi√≥n (atm)' }, type: 'logarithmic' }
                    }
                }
            });
        }
        
        function updateComparison() {
            if (!comparisonChart) return;
            
            const checkboxes = document.querySelectorAll('.comparison-panel input[type="checkbox"]');
            checkboxes.forEach((cb, idx) => {
                comparisonChart.data.datasets[idx].hidden = !cb.checked;
            });
            
            comparisonChart.update();
        }
        
        // Ejercicios
        function checkExercise1() {
            const answer = parseFloat(document.getElementById('exercise1Answer').value);
            const correct = 0.207; // Valor aproximado correcto
            const tolerance = 0.015;
            
            const feedback = document.getElementById('exercise1Feedback');
            const steps = document.getElementById('exercise1Steps');
            
            if (Math.abs(answer - correct) < tolerance) {
                feedback.innerHTML = '<div class="feedback correct">¬°Correcto! ‚úÖ Excelente trabajo.</div>';
                steps.style.display = 'block';
            } else {
                feedback.innerHTML = '<div class="feedback incorrect">‚ùå Incorrecto. La respuesta correcta es aproximadamente 0.207 atm. Revisa los pasos a continuaci√≥n.</div>';
                steps.style.display = 'block';
            }
        }
        
        function checkExercise2() {
            const answer = parseFloat(document.getElementById('exercise2Answer').value);
            const correct = 60.9;
            const tolerance = 2;
            
            const feedback = document.getElementById('exercise2Feedback');
            const steps = document.getElementById('exercise2Steps');
            
            if (Math.abs(answer - correct) < tolerance) {
                feedback.innerHTML = '<div class="feedback correct">¬°Correcto! ‚úÖ Dominas la ecuaci√≥n.</div>';
                steps.style.display = 'block';
            } else {
                feedback.innerHTML = '<div class="feedback incorrect">‚ùå Incorrecto. La respuesta correcta es aproximadamente 60.9¬∞C. Revisa los pasos.</div>';
                steps.style.display = 'block';
            }
        }
        
        // Visualizaci√≥n avanzada
        function initAdvanced() {
            createMolecules('molecularAnimation', 50);
            
            const slider = document.getElementById('advancedSlider');
            slider.addEventListener('input', updateAdvanced);
            
            const ctx = document.getElementById('advancedChart').getContext('2d');
            advancedChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 21}, (_, i) => i * 5),
                    datasets: [{
                        label: 'Agua',
                        data: Array.from({length: 21}, (_, i) => calculatePressure('water', i * 5)),
                        borderColor: '#2196F3',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Temperatura (¬∞C)' } },
                        y: { title: { display: true, text: 'Presi√≥n (atm)' } }
                    }
                }
            });
            
            updateAdvanced();
        }
        
        function updateAdvanced() {
            const tempC = parseFloat(document.getElementById('advancedSlider').value);
            document.getElementById('molTemp').textContent = tempC.toFixed(0);
            
            // Actualizar animaci√≥n de mol√©culas
            const container = document.getElementById('molecularAnimation');
            const molecules = container.querySelectorAll('.molecule');
            const speedFactor = 1 + (tempC / 100) * 2;
            
            molecules.forEach(mol => {
                mol.style.animationDuration = (3 / speedFactor) + 's';
                if (tempC > 70) {
                    mol.style.top = Math.random() * 30 + '%';
                } else if (tempC > 40) {
                    mol.style.top = Math.random() * 50 + 25 + '%';
                } else {
                    mol.style.top = Math.random() * 30 + 50 + '%';
                }
            });
            
            // Actualizar observaci√≥n
            let observation = '';
            if (tempC < 30) {
                observation = 'A baja temperatura, las mol√©culas tienen poca energ√≠a cin√©tica. La mayor√≠a permanece en el l√≠quido y pocas escapan como vapor.';
            } else if (tempC < 60) {
                observation = 'A temperatura moderada, m√°s mol√©culas adquieren suficiente energ√≠a para vencer las fuerzas intermoleculares y evaporarse.';
            } else if (tempC < 90) {
                observation = 'A alta temperatura, muchas mol√©culas tienen energ√≠a suficiente para evaporarse. La presi√≥n de vapor aumenta significativamente.';
            } else {
                observation = 'Cerca del punto de ebullici√≥n, la evaporaci√≥n es muy intensa. Las mol√©culas escapan r√°pidamente del l√≠quido al vapor.';
            }
            
            document.getElementById('advancedObservation').textContent = observation;
        }
        
        // Desaf√≠o final
        const challenges = [
            { question: 'Calcula la presi√≥n de vapor del agua a 50¬∞C (P a 100¬∞C = 1 atm, ŒîHvap = 40660 J/mol). Respuesta en atm:', answer: 0.123, tolerance: 0.015 },
            { question: 'El etanol hierve a 78.4¬∞C a 1 atm. ¬øCu√°l es su presi√≥n de vapor a 25¬∞C? (ŒîHvap = 38560 J/mol). Respuesta en atm:', answer: 0.078, tolerance: 0.01 },
            { question: 'A qu√© temperatura (¬∞C) el amon√≠aco tendr√° una presi√≥n de vapor de 2 atm? (P a -33.3¬∞C = 1 atm, ŒîHvap = 23330 J/mol):', answer: -18.7, tolerance: 2 },
            { question: 'Calcula ŒîHvap (en kJ/mol) de una sustancia si P = 0.5 atm a 60¬∞C y P = 1 atm a 80¬∞C:', answer: 34.5, tolerance: 3 },
            { question: 'La acetona tiene P = 0.3 atm a 25¬∞C. ¬øA qu√© temperatura (¬∞C) tendr√° P = 0.6 atm? (ŒîHvap = 29100 J/mol):', answer: 42.5, tolerance: 2.5 }
        ];
        
        function startChallenge() {
            currentQuestion = 0;
            score = 0;
            timeLeft = 60;
            document.getElementById('challengeCard').style.display = 'block';
            document.getElementById('finalResults').style.display = 'none';
            loadQuestion();
        }
        
        function loadQuestion() {
            if (currentQuestion >= challenges.length) {
                finishChallenge();
                return;
            }
            
            const challenge = challenges[currentQuestion];
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('challengeQuestion').textContent = challenge.question;
            document.getElementById('challengeAnswer').value = '';
            document.getElementById('challengeFeedback').innerHTML = '';
            
            timeLeft = 60;
            updateTimer();
            
            if (challengeTimer) clearInterval(challengeTimer);
            challengeTimer = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(challengeTimer);
                    document.getElementById('challengeFeedback').innerHTML = 
                        '<div class="feedback incorrect">‚è±Ô∏è Tiempo agotado</div>';
                    setTimeout(() => {
                        currentQuestion++;
                        loadQuestion();
                    }, 2000);
                }
            }, 1000);
        }
        
        function updateTimer() {
            document.getElementById('timer').textContent = timeLeft;
        }
        
        function submitChallenge() {
            if (timeLeft <= 0) return;
            
            clearInterval(challengeTimer);
            const answer = parseFloat(document.getElementById('challengeAnswer').value);
            const challenge = challenges[currentQuestion];
            
            if (Math.abs(answer - challenge.answer) < challenge.tolerance) {
                const points = Math.floor(20 + (timeLeft / 60) * 10);
                score += points;
                document.getElementById('challengeFeedback').innerHTML = 
                    `<div class="feedback correct">‚úÖ ¬°Correcto! +${points} puntos</div>`;
            } else {
                document.getElementById('challengeFeedback').innerHTML = 
                    `<div class="feedback incorrect">‚ùå Incorrecto. La respuesta era ${challenge.answer.toFixed(2)}</div>`;
            }
            
            document.getElementById('finalScore').textContent = score;
            const progress = ((currentQuestion + 1) / challenges.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressBar').textContent = progress.toFixed(0) + '%';
            
            setTimeout(() => {
                currentQuestion++;
                loadQuestion();
            }, 2500);
        }
        
        function finishChallenge() {
            document.getElementById('challengeCard').style.display = 'none';
            document.getElementById('finalResults').style.display = 'block';
            document.getElementById('finalScoreDisplay').textContent = score;
            
            let badge, title, message;
            if (score >= 90) {
                badge = 'üèÜ';
                title = 'Maestro de la Vaporizaci√≥n';
                message = '¬°Extraordinario! Dominas completamente la ecuaci√≥n de Clausius-Clapeyron.';
            } else if (score >= 70) {
                badge = 'ü•á';
                title = 'Experto en Termodin√°mica';
                message = '¬°Excelente trabajo! Tienes un s√≥lido entendimiento del tema.';
            } else if (score >= 50) {
                badge = 'ü•à';
                title = 'Estudiante Aplicado';
                message = 'Buen esfuerzo. Con un poco m√°s de pr√°ctica alcanzar√°s la excelencia.';
            } else {
                badge = 'ü•â';
                title = 'Aprendiz Persistente';
                message = 'Sigue practicando. Revisa las secciones anteriores para reforzar tu conocimiento.';
            }
            
            document.getElementById('badge').textContent = badge;
            document.getElementById('badgeTitle').textContent = title;
            document.getElementById('finalMessage').textContent = message;
        }
        
        function resetChallenge() {
            startChallenge();
        }
    </script>
</body>
</html>